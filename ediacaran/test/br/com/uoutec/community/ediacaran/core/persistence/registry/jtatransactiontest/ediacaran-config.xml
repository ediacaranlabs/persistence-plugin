<?xml version="1.0" encoding="UTF-8"?>
<java version="1.8.0_101" class="java.beans.XMLDecoder">

	<object	class="br.com.uoutec.community.ediacaran.web.tomcat.TomcatServerBootstrap">
	
		<void property="listenerManager">
			<object class="br.com.uoutec.community.ediacaran.EdiacaranListenerManagerImp">
				<void method="addListener">
					<object class="br.com.uoutec.community.ediacaran.weld.tomcat.TomcatRegisterContainerEventListener"/>
				</void>
			</object>
		</void>

		<void property="securityPolicyManager">
			<object class="br.com.uoutec.community.ediacaran.SecurityPolicyManagerImp"/>
		</void>

		<void property="pluginManager">
			<object class="br.com.uoutec.community.ediacaran.PluginManagerImp"/>
		</void>

		<void property="pluginConfigurationFileReader">
			<object class="br.com.uoutec.community.ediacaran.plugins.PluginConfigurationFileReaderImp"/>
		</void>

		<void property="pluginManagerData">
			<object class="br.com.uoutec.community.ediacaran.PluginManagerDataImp"/>
		</void>
		
		<void property="pluginConfigurationFileWriter">
			<object class="br.com.uoutec.community.ediacaran.plugins.PluginConfigurationFileWriterImp"/>
		</void>

		<void property="exportImportPlugins">
			<object class="br.com.uoutec.community.ediacaran.plugins.ExportImportPluginsImp"/>
		</void>

		<void property="pluginInitializer">
			<object class="br.com.uoutec.community.ediacaran.weld.BuilderPluginInitializer">
				<!--
				<void method="addExtension">
					<string>com.arjuna.ats.jta.cdi.TransactionExtension</string>
				</void>
				<void method="addExtension">
					<string>br.com.uoutec.filter.invoker.cdi.InvokerFilterExtension</string>
				</void>
				-->
			</object>
		</void>

		<void property="pluginsSuppliersFactory">
			<object class="br.com.uoutec.community.ediacaran.weld.PluginsSuppliersFactoryImp"/>
		</void>
	
		<void property="pluginInstaller">
			<object class="br.com.uoutec.community.ediacaran.plugins.PluginInstallerImp"/>
		</void>

		<void property="pluginClassLoaderFactory">
			<object class="br.com.uoutec.community.ediacaran.weld.tomcat.TomcatBuilderClassLoaderFactory">
				<!--
				<void method="addIncludePluginClassPathMatch">
					<string>.*persistence.*</string>
				</void>
				-->
				<!--
				<void method="addIncludePluginClassPathMatch">
					<string>.*plugin.*</string>
				</void>
				-->
				<void method="addIncludePluginClassPathMatch">
					<string>.*filter.*</string>
				</void>
				
				<void method="addIncludePluginClassPathMatch">
					<string>security</string>
					<string>.*system-security.*</string>
				</void>
				
				<void method="addIncludePluginClassPathMatch">
					<string>system</string>
					<string>.*system-ediacaran.*</string>
				</void>

				<void method="addIncludePluginClassPathMatch">
					<string>persistence</string>
					<string>.*persistence-ediacaran.*</string>
				</void>
				
				<void method="addIncludePluginClassPathMatch">
					<string>front</string>
					<string>.*front-ediacaran.*</string>
				</void>
				
			</object>
		</void>
		
		<!--  
		<void property="parentClassLoader">
			<object class="java.net.URLClassLoader">
				...
			</object>
		</void>
		-->
		
		<void property="pluginsLoader">
			<object class="br.com.uoutec.community.ediacaran.plugins.PluginsLoaderImp"/>
		</void>

		<void property="varParser">
			<object class="br.com.uoutec.community.ediacaran.weld.VarParserConfigurationImp">
			
				<void property="useDefaultVars">
					<boolean>true</boolean>
				</void>
			
				<!--
				<void method="registerVarResolver">
					<string>teste</string>
					<object class="br.com.uoutec.community.ediacaran.weld.VarParserImp"/>
				</void>
				-->
				
			</object>
		</void>

		<void method="addPluginSearch">
			<object class="br.com.uoutec.community.ediacaran.plugins.JarPluginsSearch">
			
				<void property="exportImportPlugins">
					<object class="br.com.uoutec.community.ediacaran.plugins.ExportImportPluginsImp"/>
				</void>
			
			</object>
		</void>

		<void method="addPluginSearch">
			<object class="br.com.uoutec.community.ediacaran.plugins.FileSystemPluginsSearch"/>
		</void>

		<void method="addEntity">
			<object class="br.com.uoutec.community.ediacaran.web.SecurityProviderImp"/>
			<array class="java.lang.Class" length="0"/>
		</void>
		
		<void method="addResource">
		
			<object class="br.com.uoutec.community.ediacaran.Resource">
			
				<void method="setName">
					<string>java:comp/env/ds/direct_database</string>
				</void>
				
				<void method="setType">
					<string>org.hsqldb.jdbc.pool.JDBCXADataSource</string>
				</void>

				<void method="addProperty">
					<string>url</string>
					<string>jdbc:hsqldb:mem:testdb</string>
				</void>

				<void method="addProperty">
					<string>user</string>
					<string>sa</string>
				</void>
			
				<void method="addProperty">
					<string>password</string>
					<string></string>
				</void>
				
			</object>
		</void>

		<void method="addResource">
		
			<object class="br.com.uoutec.community.ediacaran.Resource">
			
				<void method="setName">
					<string>java:comp/UserTransaction</string>
				</void>
				
				<void method="setFactory">
					<string>com.arjuna.ats.internal.jta.transaction.arjunacore.UserTransactionImple</string>
				</void>
				
			</object>
			
		</void>
		
		<void method="addResource">
		
			<object class="br.com.uoutec.community.ediacaran.Resource">
			
				<void method="setName">
					<string>java:comp/env/TransactionManager</string>
				</void>
				
				<void method="setFactory">
					<string>com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionManagerImple</string>
				</void>
				
			</object>
			
		</void>
		
		<void method="addResource">
		
			<object class="br.com.uoutec.community.ediacaran.Resource">
			
				<void method="setName">
					<string>java:comp/env/TransactionSynchronizationRegistry</string>
				</void>
				
				<void method="setFactory">
					<string>com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionManagerImple</string>
				</void>
				
			</object>

		</void>
		
		<void method="addResource">
		
			<object class="br.com.uoutec.community.ediacaran.Resource">
			
				<void method="setName">
					<string>java:comp/env/ds/database</string>
				</void>

				<void method="setType">
					<string>javax.sql.DataSource</string>
				</void>
				
				<void method="addProperty">
					<string>driverClassName</string>
					<string>com.arjuna.ats.jdbc.TransactionalDriver</string>
				</void>
				
				<void method="addProperty">
					<string>url</string>
					<string>jdbc:arjuna:java:comp/env/ds/direct_database</string>
				</void>
				
			</object>
			
		</void>
		
		<void method="setSystemProperty">
			<string>java.naming.factory.url.pkgs</string>
			<string>org.apache.naming</string>
		</void>
		
		<void method="setSystemProperty">
			<string>java.naming.factory.initial</string>
			<string>org.apache.naming.java.javaURLContextFactory</string>
		</void>
		
		<void method="setSystemProperty">
			<string>java.security.auth.login.config</string>
			<string>config/jaas.config</string>
		</void>
		
		<void method="setSystemProperty">
			<string>java.security.debug</string>
			<string>all</string>
		</void>
		
		<!-- 
		<void method="setSystemProperty">
			<string>java.util.logging.manager</string>
			<string>org.apache.logging.log4j.jul.LogManager</string>
		</void>
		-->	
	</object>
</java>
